# 项目说明书

## 1）项目设计部分：

### （1）项目总体构成

#### 结构上：

##### 1.前端：

前端JS脚本、css样式、ajax前后端交互请求、图片延迟加载、jade页面

##### 2.后端：

jada模板引擎、mongodb数据库增删改查、express与nodejs路由设置、静态文件

#### 功能上：

##### 1.普通用户：

1）账户的注册与登陆

2）电影的搜索

3）电影分类页浏览

4）电影院搜索

5）海报宣传页的浏览

6）电影资讯的浏览

7）具体电影详情页的浏览

8）对具体电影的评论与回复

9）电影预告片的浏览

##### 2.管理员：

1）电影的后台录入（即电影详情页信息的录入）

2）全部电影的增删改查

3）电影分类的增减

4）电影分类页面的增删改查

5）电影院的增删改查

6）用户列表的查看和删除

7）访客统计

### （2）引入的包在项目中的作用相关说明；

express：后台框架的搭建、路由的设置

mongodb：数据库的存储

fs：文件管理

Ajax：前后端数据的交互

bcryptjs：对密码进行加密

jade：前端渲染

mocha：单元测试框架

mongoose：对mongodb的操作

### （3）项目目录结构和各个部分的说明

```
├── app.js            项目入口文件
├── app               Node后端MVC文件目录
│   ├── controllers   控制器目录
│   │   ├── movie     电影页面控制器目录
│   │   └── user      用户列表控制器目录
│   ├── models        模型目录
│   │   ├── movie	  电影模型
│   │   └── user	  用户模型
│   ├── schemas       模式目录
│   │   ├── movie	  电影模式
│   │   └── user	  用户模式
│   └── views         视图文件目录
│       ├── includes  页面整体结构渲染
│       └── pages	  页面具体内容渲染
├── DataBase 		  存放数据库文件
│   └── 190110910133
├── node_modules      node模块目录
├── public            静态文件目录
│   ├── images        图片目录
│   │   ├── includes  公共图片目录
│   │   ├── movie	  电影页面相关图片
│   │   └── user	  用户相关图片
│   ├── libs          经过gulp处理后文件所在目录
│   │   ├── css		  css脚本
│   │   ├── images	  电影页面相关图片
│   │   └── scripts	  页面交互脚本
│   ├── sass          样式目录
│   │   ├── include	  页面细节样式
│   │   ├── movie	  电影相关页面细节样式
│   ├── scripts       JS脚本目录
│   │   └── js		  
│   └── upload        海报生成存储目录
│       ├── movie	  电影海报存储
├── route             路由目录
│   └── router.js
├── test              测试文件目录
│   └── images		  录入电影时海报上传文件
│   └── user
│       └── user.js	  用户测试脚本
├── README.md		  开发日记
├── gulpfile.js       gulp文件
├── package.json
└── doc 			  存放项目说明书
```

## 2）数据库设计：

categories 电影分类表：

| 字段名 | 注释               | 是否主键 |
| ------ | ------------------ | -------- |
| _id    | id                 | 是       |
| meta   | 创建时间、修改时间 |          |
| movies | 电影列表           |          |
| name   | 名字               |          |

cities 城市列表：

| 字段名         | 注释               | 是否主键 |
| -------------- | ------------------ | -------- |
| _id            | id                 | 是       |
| name           | 城市名             |          |
| meta           | 创建时间、修改时间 |          |
| cityCategories | 城市所属分类id     |          |

citycategories 城市分类表：

| 字段名        | 注释               | 是否主键 |
| ------------- | ------------------ | -------- |
| _id           | id                 | 是       |
| cityProgramme | 城市字段id         |          |
| name          | 分类名             |          |
| meta          | 创建时间、修改时间 |          |
| cities        | 城市id             |          |

cityprogrammes 城市字段表：

| 字段名         | 注释               | 是否主键 |
| -------------- | ------------------ | -------- |
| _id            | id                 | 是       |
| cityCategories | 城市所属分类id     |          |
| name           | 分类名             |          |
| meta           | 创建时间、修改时间 |          |

moviescomments 电影评论表：

| 字段名  | 注释               | 是否主键 |
| ------- | ------------------ | -------- |
| _id     | id                 | 是       |
| movie   | 电影id             |          |
| from    | 评论人id           |          |
| content | 回复内容           |          |
| meta    | 创建时间、修改时间 |          |
| reply   | 回复人id           |          |

movie 电影表：

| 字段名   | 注释               | 是否主键 |
| -------- | ------------------ | -------- |
| _id      | id                 | 是       |
| pv       | 访客量             |          |
| doctor   | 导演姓名           |          |
| category | 所属分类id         |          |
| title    | 电影名             |          |
| meta     | 创建时间、修改时间 |          |
| casts    | 主演姓名           |          |
| genres   | 电影类型           |          |
| aka      | 别名               |          |
| country  | 国家               |          |
| poster   | 海报文件名         |          |
| flash    | 预告片连接         |          |
| year     | 年                 |          |
| rating   | 评分               |          |
| summary  | 简介               |          |

user 用户表：

| 字段名   | 注释                                    | 是否主键 |
| -------- | --------------------------------------- | -------- |
| _id      | id                                      | 是       |
| name     | 账号                                    |          |
| password | 密码                                    |          |
| role     | 权限 （50以上为管理员）50以下为普通用户 |          |
| meta     | 创建时间、修改时间                      |          |

## 3）使用说明书：

##### 普通用户：



## 4）github信息：

远程仓库：https://github.com/yadadaa/Finalassignment/tree/master

账号：yedadaa





